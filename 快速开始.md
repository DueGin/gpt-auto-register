# 🎯 使用爬虫地址快速启动指南

## 最快开始方式

```bash
# 方式 1：直接启动（使用已有地址）
python3 quick_start.py

# 方式 2：先采集地址再启动（推荐新用户）
python3 quick_start.py --scrape 20
```

然后访问：**http://localhost:7070**

---

## 工作原理

### 地址流程

```
爬虫采集地址
    ↓
保存到 JSON 文件
    ↓
注册时自动读取第一条
    ↓
使用完毕自动删除
    ↓
文件为空时自动清理
```

### 配置说明

**config.yaml** 已配置为使用爬虫地址：

```yaml
payment:
  billing:
    address_source: "scraped"  # 使用爬虫采集的地址
```

---

## 三种运行模式

| 命令 | 说明 | 场景 |
|------|------|------|
| `python3 quick_start.py` | 直接启动 | 已有充足地址 |
| `python3 quick_start.py --scrape 20` | 采集再启动 | 地址不足 |
| `python3 start_with_scraper.py --server` | 直接启动（完整版） | 完全控制 |

---

## 使用示例

### 场景 1：首次使用

```bash
# 1. 先采集 50 个地址
python3 quick_start.py --scrape 50

# 等待采集完成，自动启动服务
# 2. 打开浏览器 http://localhost:7070
# 3. 输入 10，点击"开始注册"
# 4. 观看自动注册过程
```

### 场景 2：已有地址，快速启动

```bash
# 直接启动
python3 quick_start.py

# 输入注册数量并开始
```

### 场景 3：检查地址库存

```bash
python3 start_with_scraper.py --check

# 输出：
# 📄 basic_addresses_20260121-110405.json: 15 个地址
# 总计: 15 个地址
```

---

## 实际注册演示

假设你采集了 3 个地址：

```json
[
  { "全名": "John Doe", "街道": "123 Main St", ... },
  { "全名": "Jane Smith", "街道": "456 Oak Ave", ... },
  { "全名": "Bob Johnson", "街道": "789 Elm St", ... }
]
```

**第 1 次注册：** 使用 John Doe 的地址，文件剩 2 个
**第 2 次注册：** 使用 Jane Smith 的地址，文件剩 1 个
**第 3 次注册：** 使用 Bob Johnson 的地址，文件变空并自动删除
**第 4 次注册：** 地址库为空，自动回退到本地随机生成

---

## 地址库管理

### 查看当前地址数

```bash
python3 start_with_scraper.py --check
```

### 地址库位置

```
项目根目录/
  └── 美国地址爬虫_副本/
      ├── basic_addresses_20260121-110405.json
      └── basic_addresses_20260122-143022.json
```

### 手动添加地址

直接在 JSON 文件中添加：

```json
[
  {
    "全名": "Your Name",
    "街道": "123 Your Street",
    "城市": "New York",
    "州全称": "New York",
    "邮编": "10001"
  }
]
```

---

## 常见问题

**Q: 地址用完了怎么办？**

A: 运行 `python3 quick_start.py --scrape 30` 重新采集

**Q: 想用随机地址代替爬虫地址？**

A: 修改 `config.yaml`：
```yaml
address_source: "local"  # 改这里
```

**Q: 采集速度太慢？**

A: 查看爬虫配置，或联系爬虫开发者调整 delay 参数

**Q: 注册失败了，地址会被重复使用吗？**

A: 不会。失败后地址已被弹出，若需重试需重新采集

---

## 性能建议

- 💾 **地址库大小**：建议保持 50-100 个地址备用
- ⏱️ **采集间隔**：建议每次采集后间隔 5 分钟
- 📊 **批量注册**：建议单批 5-20 个，避免过快被检测

---

## 故障排查

| 问题 | 解决方案 |
|------|--------|
| 无法启动 | 检查 Python 环境：`python3 --version` |
| 地址库为空 | 运行 `python3 quick_start.py --scrape 20` |
| 爬虫失败 | 检查网络连接和 Selenium 环境 |
| 端口 7070 被占用 | 改用其他端口或关闭占用程序 |

---

## 快速命令参考

```bash
# 检查环境
.venv/bin/python --version

# 检查地址库
python3 start_with_scraper.py --check

# 采集 10 个地址
python3 quick_start.py --scrape 10

# 采集 50 个地址
python3 quick_start.py --scrape 50

# 启动服务
python3 quick_start.py

# 启动服务（完整版）
python3 start_with_scraper.py --server

# 查看注册成果
cat registered_accounts.txt
```

---

## 下一步

1. ✅ 配置已完成
2. ✅ 爬虫集成已完成
3. 📌 **现在运行：** `python3 quick_start.py --scrape 20`
4. 📌 **然后访问：** http://localhost:7070

祝你使用愉快！🎉
